(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b2447960"],{b0c0:function(t,e,o){var n=o("83ab"),i=o("9bf2").f,a=Function.prototype,l=a.toString,c=/^\s*function ([^ (]*)/,r="name";n&&!(r in a)&&i(a,r,{configurable:!0,get:function(){try{return l.call(this).match(c)[1]}catch(t){return""}}})},bf20:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-dialog",{attrs:{title:"借书",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[o("div",[o("table",[o("tr",[o("td",[o("el-tag",[t._v("借阅图书")])],1),o("td",[t._v("《"+t._s(t.bookname)+"》")])]),o("tr",[o("td",[o("el-tag",[t._v("借阅用户名")])],1),o("td",[o("el-input",{attrs:{placeholder:"请输入借阅用户名称..."},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1)])])]),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:t.canceldoAddLog}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.doAddLog}},[t._v("确 定")])],1)]),o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData.filter((function(e){return!t.search||e.name.toLowerCase().includes(t.search.toLowerCase())||e.author.toLowerCase().includes(t.search.toLowerCase())||e.category.toLowerCase().includes(t.search.toLowerCase())}))}},[o("el-table-column",{attrs:{label:"名称",prop:"name"}}),o("el-table-column",{attrs:{label:"作者",prop:"author"}}),o("el-table-column",{attrs:{label:"类别",prop:"category"}}),o("el-table-column",{attrs:{label:"简介",prop:"introduction"}}),o("el-table-column",{attrs:{label:"剩余/本",prop:"count"}}),o("el-table-column",{attrs:{label:"价格/元",prop:"price"}}),o("el-table-column",{attrs:{align:"right",width:"300px"},scopedSlots:t._u([{key:"header",fn:function(e){return[o("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})]}},{key:"default",fn:function(e){return[o("el-button",{attrs:{disabled:e.row.count<=0,size:"mini",type:"success",icon:"el-icon-s-promotion"},on:{click:function(o){return t.borrowBook(e.row)}}},[t._v("借书")]),o("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(o){return t.handleEdit(e.row)}}},[t._v("编辑")]),o("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(o){return t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1)],1)},i=[],a=(o("b0c0"),o("ac1f"),o("5319"),{created:function(){this.init()},data:function(){return{dialogVisible:!1,tableData:[{id:"",name:"",author:"",category:"",introduction:"",count:"",price:""}],search:"",bookname:"",username:"",bookId:""}},methods:{init:function(){var t=this;this.$axios.get("/book/booklist").then((function(e){t.tableData=e.data})).catch((function(t){console.log(t)}))},canceldoAddLog:function(){this.dialogVisible=!1,this.bookname="",this.bookId="",this.username=""},borrowBook:function(t){this.dialogVisible=!0,this.bookname=t.name,this.bookId=t.id},doAddLog:function(){var t=this;this.$axios.put("/book/borrow/addBorrowLog",{bookId:this.bookId,username:this.username}).then((function(e){t.canceldoAddLog(),t.init()})).catch((function(t){console.log(t)}))},handleEdit:function(t){this.$router.replace("/addbook?bookId="+t.id)},handleDelete:function(t){var e=this;this.$confirm("此操作将删除图书《"+t.name+"》，是否继续？","提示",{cancelButtonText:"取消",confirmButtonText:"确定"}).then((function(){e.$axios.delete("/book/delete/"+t.id).then((function(t){e.init()})).catch((function(t){console.log(t)}))})).catch((function(){e.$message.info("取消删除!")}))}}}),l=a,c=o("2877"),r=Object(c["a"])(l,n,i,!1,null,null,null);e["default"]=r.exports}}]);
//# sourceMappingURL=chunk-b2447960.7f0bee90.js.map